---
layout: post
title: "ê°€ì´ë“œë¼ì¸ UI ì œì‘(2025-05-06 ~ 2025-05-07)[ì†ìŠ¹ë¯¼]"
date: 2025-05-06 10:00:00 +0900
typora-root-url: ../
---

ì£¼ìš” ê¸°ëŠ¥ì¸ ê°€ì´ë“œë¼ì¸ UI ì´ˆì•ˆ

![image](/images/2025-05-07-ê°€ì´ë“œë¼ì¸ UI ì œì‘(2025-05-06 ~ 2025-05-07)[ì†ìŠ¹ë¯¼]/image.webp)

ì´ ë¶€ë¶„ì— ìˆ˜ì •ì„ ì¶”ê°€í•´ì„œ UIë¥¼ ê°œì„ í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤.

UI íë¦„ë„

![image (1)](/images/2025-05-07-ê°€ì´ë“œë¼ì¸ UI ì œì‘(2025-05-06 ~ 2025-05-07)[ì†ìŠ¹ë¯¼]/image (1).webp)

- ì™¼ìª½ íŒ¨ë„ ë¶€ë¶„ì—ëŠ” íë¦„ë„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¶€ë¶„
  
    ```php
    <!-- ì¢Œì¸¡ íŒ¨ë„ -->
        <div class="left-panel">
            <div id="flowchart-images"></div>
        </div>
    ```
    
- ê°€ìš´ë° íŒ¨ë„ì—ëŠ” ë¬¸ì œë¥¼ ë³´ì—¬ì£¼ëŠ” ë Œë”ë§ ë¶€ë¶„
  
    ```php
    <!-- ê°€ìš´ë° íŒ¨ë„ -->
        <div class="center-panel">
            <h1>í•œ ì¤„ì”© í’€ê¸°</h1>
            <span>ë¬¸ì œ ë²ˆí˜¸: <?= htmlspecialchars($problem_id) ?></span>
    
            <?php      
            function render_tree_plain($blocks, &$answer_index = 0) {
                $html = "";
            
                foreach ($blocks as $block) {
                    $depth = $block['depth'];
                    $margin_left = $depth * 30;
            
                    if ($block['type'] === 'text') {
                        $raw = trim($block['content']);
                        if ($raw === '') continue;
            
                        $line = htmlspecialchars($block['content']);
                        $has_correct_answer = isset($GLOBALS['OJ_CORRECT_ANSWERS'][$answer_index]);
                        $disabled = $has_correct_answer ? "" : "disabled";
            
                        $html .= "<div class='submission-line' style='margin-left: {$margin_left}px;'>";
                        $html .= "<div class='code-line'>{$line}</div>";
                        $html .= "<textarea id='ta_{$answer_index}' class='styled-textarea' data-index='{$answer_index}' {$disabled}></textarea>";
            
                        // ğŸ”¥ ë²„íŠ¼ í•­ìƒ í‘œì‹œ
                        $html .= "<button onclick='submitAnswer({$answer_index})' id='btn_{$answer_index}' class='submit-button'>ì œì¶œ</button>";
                        $html .= "<button onclick='showAnswer({$answer_index})' id='view_btn_{$answer_index}' class='view-button'>ë‹µì•ˆ í™•ì¸</button>";
            
                        $html .= "<div id='answer_area_{$answer_index}' class='answer-area' style='display:none; margin-top: 10px;'></div>";
                        $html .= "<div style='width: 50px; text-align: center; margin-top: 10px;'><span id='check_{$answer_index}' class='checkmark' style='display:none;'>âœ…</span></div>";
                        $html .= "</div>";
            
                        $answer_index++;
                    } else if (isset($block['children']) && is_array($block['children'])) {
                        $html .= render_tree_plain($block['children'], $answer_index);
                    }
                }
            
                return $html;
            }     
    
            $answer_index = 0;
            echo render_tree_plain($OJ_BLOCK_TREE, $answer_index);
            ?>
        </div>
    ```
    
- ì˜¤ë¥¸ìª½ íŒ¨ë„ì—ëŠ” í”¼ë“œë°±ì„ ì œê³µí•´ì£¼ëŠ” í”¼ë“œë°± ë¶€ë¶„ 3ë¶€ë¶„
  
    ```php
    <!-- ì˜¤ë¥¸ìª½ íŒ¨ë„ -->
        <div class="right-panel">
            <h2>ğŸ“‹ í”¼ë“œë°± ì°½</h2>
        </div>
    ```
    
- guideline.php(src/web)
  
    ```c
    <?php
    //ê° stepì— ë§ëŠ” PHP íŒŒì¼ì„ ë¶ˆëŸ¬ì™€ HTMLì„ ë°˜í™˜
    
    $step = isset($_GET['step']) ? intval($_GET['step']) : 1;
    $problem_id = isset($_GET['problem_id']) ? intval($_GET['problem_id']) : 0;
    $index = isset($_GET['index']) ? intval($_GET['index']) : -1;
    
    switch ($step) {
        case 1:
            include(__DIR__ . "/guideline1.php");
            break;
        case 2:
            include(__DIR__ . "/guideline2.php");
            break;
        case 3:
            include(__DIR__ . "/guideline3.php");
            break;
        default:
            echo "<div class='ui red message'>ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìŠ¤í…ì…ë‹ˆë‹¤.</div>";
    }
    
    ```
    
- guideline.css(src/web/template/syzoj/css)
  
    ```c
    /* step1 ,2 ,3 íˆ´ë°” */
    .top-toolbar {
      width: auto; 
      padding: 15px 30px;
      display: flex;
      justify-content: center; /* âœ… ê°€ìš´ë° ì •ë ¬ */
    }
    
    .step-buttons {
      display: flex;
      gap: 10px;
    }
    
    .step-buttons .ui.button {
      background-color: #2185d0 !important; /* âœ… íŒŒë€ ë°°ê²½ */
      color: #ffffff !important;           /* âœ… í° ê¸€ì”¨ */
      border-radius: 4px !important;
      min-width: 100px;
    }
    
    .step-buttons .ui.button.active {
      background-color: #0d71bb !important; /* âœ… ë” ì§„í•œ íŒŒë€ìƒ‰ (í™œì„± ìƒíƒœ) */
    }
    
    /* ë²„íŠ¼ ì „ì²´ wrapper ì •ë ¬ */
    .action-buttons {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 20px;
      margin-bottom: 20px;
    }
    
    /* ë¬¸ì œ ê°€ê¸° ë²„íŠ¼ (ì™¼ìª½ ë) */
    .back-button {
      margin-left: 0;
    }
    
    /* ë‹¤ì‹œ í’€ê¸° ë²„íŠ¼ (ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì•½ê°„ ë„ìš°ê¸°) */
    .reset-button {
      margin-right: 20px;
    }
    
    /* ê³µí†µ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .ui.button.back,
    .ui.button.again {
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.2s ease;
    }
    
    /* ë¬¸ì œ ê°€ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .ui.button.back {
      background-color: #db2828; 
      color: white;
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.2s ease;
    }
    
    .ui.button.back:hover {
      background-color: #c21818; /* hover íš¨ê³¼ */
    }
    
    /* ë‹¤ì‹œ í’€ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .ui.button.again {
      background-color: #32CD32; 
      color: white;
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.2s ease;
    }
    
    .ui.button.again:hover {
      background-color: #228B22; /* hover íš¨ê³¼ */
    }
    
    /* ì „ì²´ ë ˆì´ì•„ì›ƒ */
    .main-layout {
      display: flex;
      width: 100%;
      box-sizing: border-box;
      height: auto;
      min-height: 100vh;
      align-items: flex-start;
      align-self: stretch;
    }
    
    /* ì¢Œì¸¡ flowchart ì´ë¯¸ì§€ ì˜ì—­ */
    .left-panel {
      position: relative;
      width: 20%;
      min-width: 120px;
      max-width: 220px;
      padding: 10px;
      box-sizing: border-box;
      border-right: 1px solid #ccc;
    }
    
    /* flowchart ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ */
    #flowchart-images {
      position: relative;
      width: 100%;
      height: auto;
      overflow: visible;
    }
    
    #floating-img {
      position: fixed;
      top: 100px;
      left: 20px; /* ğŸ’¡ ëª…ì‹œì ìœ¼ë¡œ ì™¼ìª½ ì—¬ë°± ì„¤ì •í•˜ì—¬ center-panel ì¹¨ë²” ë°©ì§€ */
      width: 250px;
      max-height: 300px;
      border: 2px solid #ccc;
      z-index: 9999;
    }
    
    /* ê°€ìš´ë° ì½”ë“œ ì…ë ¥ ì˜ì—­ */
    .center-panel {
      position: relative;
      flex-grow: 2;
      padding: 20px;
      overflow-y: auto;
      background-color: #ffffff;
      box-sizing: border-box;
      min-width: 0;
    }
    
    /* ì˜¤ë¥¸ìª½ í”¼ë“œë°± íŒ¨ë„ */
    .right-panel {
      flex: 0 0 25%;
      min-width: 200px;
      max-width: 300px;
      padding: 20px;
      overflow-y: auto;
      background-color: #ffffff;
      box-sizing: border-box;
      border-left: 1px solid #ddd;
    }
    
    /* ì½”ë“œ ì„¤ëª… ë¼ì¸ */
    .code-line {
      background-color: #f8f8fa;
      border: 1px solid #ddd;
      width: 100%;
      border-radius: 6px;
      padding: 12px 16px;
      margin-bottom: 8px;
      font-size: 18px;
      color: #333;
      white-space: pre-wrap;
      word-break: break-word;
      box-sizing: border-box;
    }
    
    /* ì½”ë“œ ì…ë ¥ì°½ */
    .styled-textarea {
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 14px;
      font-family: monospace;
      font-size: 18px;
      background-color: #fff;
      line-height: 1.5;
      resize: none;
      width: 100%;
      box-sizing: border-box;
      min-height: 40px;
      margin-bottom: 10px;
    }
    
    /* ì œì¶œ ë²„íŠ¼ ë° ë³´ê¸° ë²„íŠ¼ */
    .submit-button, .view-button {
      margin-top: 0;
      color: white !important;
      border: none !important;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      display: inline-block;
      text-align: center;
    }
    
    .submit-button {
      background-color: #4a90e2 !important;
    }
    
    .view-button {
      background-color: #ff8c00 !important;
    }
    
    /* ì •ë‹µ í‘œì‹œ ì˜ì—­ */
    .answer-area {
      font-size: 16px;
      color: #333;
      background-color: #f1f1f1;
      padding: 10px;
      border-radius: 6px;
      margin-top: 8px;
      word-break: break-word;
    }
    
    /* ì²´í¬ ì•„ì´ì½˜ */
    .checkmark {
      font-size: 20px;
      color: #2ecc71;
      margin-top: 8px;
    }
    
    /* ë“¤ì—¬ì“°ê¸° ê¸°ë°˜ depth ì‹œê°í™” */
    .submission-line {
      display: block;
      margin-bottom: 20px;
      box-sizing: border-box;
    }
    
    ```
    
- guideline1.php(syzoj)
  
    ```c
    //ê°€ì´ë“œë¼ì¸
    <?php
    include("include/db_info.inc.php");
    include("guideline_common.php"); // âœ¨ ê³µí†µ íŒŒì¼ ì‚¬ìš©
    
    $file_path = "/home/Capstone_Design_Troy/test/total_test/step1_guideline.txt";
    $tagged_path = "/home/Capstone_Design_Troy/test/total_test/step1_tagged_code.txt";
    
    $guideline_contents = file_get_contents($file_path);
    $tagged_contents = file_get_contents($tagged_path);
    
    $OJ_BLOCK_TREE = guidelineFilter($guideline_contents);
    $OJ_CORRECT_ANSWERS = codeFilter($tagged_contents);
    $OJ_SID = "STEP 1";
    
    $problem_id = isset($_GET['problem_id']) ? intval($_GET['problem_id']) : 0;
    $index = isset($_GET['index']) ? intval($_GET['index']) : -1;
    $default_img = "/flowcharts/default.png";
    $index_start = 2;
    $index_end = 4;
    
    include("template/syzoj/guideline1.php");//ë Œë”ë§ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
    ?>
    
    ```
    
- guideline1.php(src/web)
  
    ```c
    <?php
    include("include/db_info.inc.php");
    include("guideline_common.php"); // âœ¨ ê³µí†µ íŒŒì¼ ì‚¬ìš©
    
    $file_path = "/home/Capstone_Design_Troy/test/total_test/step1_guideline.txt";
    $tagged_path = "/home/Capstone_Design_Troy/test/total_test/step1_tagged_code.txt";
    
    $guideline_contents = file_get_contents($file_path);
    $tagged_contents = file_get_contents($tagged_path);
    
    $OJ_BLOCK_TREE = guidelineFilter($guideline_contents);
    $OJ_CORRECT_ANSWERS = codeFilter($tagged_contents);
    $OJ_SID = "STEP 1";
    
    $problem_id = isset($_GET['problem_id']) ? intval($_GET['problem_id']) : 0;
    $index = isset($_GET['index']) ? intval($_GET['index']) : -1;
    $default_img = "/flowcharts/default.png";
    $index_start = 2;
    $index_end = 4;
    
    include("template/syzoj/guideline1.php");//ë Œë”ë§ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
    ?>
    
    ```
    
- guideline_common.php(src/web)
    - íƒœê·¸ë¥¼  íŒŒì‹±í•˜ëŠ” ì£¼ìš”  ë¡œì§ ë¶€ë¶„!!
      
        ```c
        <?php
        require_once "include/db_info.inc.php";
        
        $problem_id = isset($_GET['problem_id']) ? intval($_GET['problem_id']) : 0;
        //$problem_id=9944;
        $index = isset($_GET['index']) ? intval($_GET['index']) : -1;
        // ë””ë²„ê¹… ìš© default ì´ë¯¸ì§€ ì„¤ì •
        // $res = pdo_query($sql, $problem_id);
        $default_img = "/flowcharts/default.png";
        
        header("Content-Type: application/json");
        
        if ($problem_id <= 0) {
            echo json_encode([
                'success' => true,
                'url' => $url,
                'debug' => [
                    'problem_id' => $problem_id,
                    'index' => $index,
                    'res' => $res
                ]
            ]);
            exit;
        }
        
        //DBì—ì„œ ë§í¬ë¥¼ ê°€ì ¸ì™€ì„œ ë§í¬ë¥¼ êµ¬í˜„
        $sql = "SELECT png_address FROM flowchart 
                WHERE problem_id = ? 
                AND start_num <= ?
                AND end_num >= ?
                LIMIT 1";
        
        $res = pdo_query($sql, $problem_id, $index, $index);
        
        if (count($res) > 0) {
            $filename =($res[0]['png_address'] . ".png");
            $url = ($res[0]['png_address'] . ".png");
            // $url = "/flowcharts/1000_1.png";
        } else {
            $url = $default_img;
        }
        
        // ë””ë²„ê¹… ìš© default ì´ë¯¸ì§€ ì„¤ì •
        // $url = $default_img;
        echo json_encode([
            'success' => true,
            'url' => $url,
            'debug' => [
                'problem_id' => $problem_id,
                'index' => $index,
                'res' => $res
            ]
        ]);
        ```
        

- ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë¡œì§(get_flowchart_image.php)(src/web)
  
    ```
    <?php
    require_once "include/db_info.inc.php";
    
    $problem_id = isset($_GET['problem_id']) ? intval($_GET['problem_id']) : 0;
    //$problem_id=9944;
    $index = isset($_GET['index']) ? intval($_GET['index']) : -1;
    // ë””ë²„ê¹… ìš© default ì´ë¯¸ì§€ ì„¤ì •
    // $res = pdo_query($sql, $problem_id);
    $default_img = "/flowcharts/default.png";
    
    header("Content-Type: application/json");
    
    if ($problem_id <= 0) {
        echo json_encode([
            'success' => true,
            'url' => $url,
            'debug' => [
                'problem_id' => $problem_id,
                'index' => $index,
                'res' => $res
            ]
        ]);
        exit;
    }
    
    //DBì—ì„œ ë§í¬ë¥¼ ê°€ì ¸ì™€ì„œ ë§í¬ë¥¼ êµ¬í˜„
    $sql = "SELECT png_address FROM flowchart 
            WHERE problem_id = ? 
            AND start_num <= ?
            AND end_num >= ?
            LIMIT 1";
    
    $res = pdo_query($sql, $problem_id, $index, $index);
    
    if (count($res) > 0) {
        $filename =($res[0]['png_address'] . ".png");
        $url = ($res[0]['png_address'] . ".png");
        // $url = "/flowcharts/1000_1.png";
    } else {
        $url = $default_img;
    }
    
    // ë””ë²„ê¹… ìš© default ì´ë¯¸ì§€ ì„¤ì •
    // $url = $default_img;
    echo json_encode([
        'success' => true,
        'url' => $url,
        'debug' => [
            'problem_id' => $problem_id,
            'index' => $index,
            'res' => $res
        ]
    ]);
    ```